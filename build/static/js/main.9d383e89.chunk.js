(window.webpackJsonpreact_jwt_fend=window.webpackJsonpreact_jwt_fend||[]).push([[0],{39:function(e,a,t){e.exports=t(72)},44:function(e,a,t){},72:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(12),o=t.n(r),s=(t(44),t(79)),c=t(78),i=t(74),u=t(75),m=t(35),h=t(9),d=t(77),g=t(76),p=t(19),E=t.n(p);var w=function(e){var a=Object(n.useState)(""),t=Object(h.a)(a,2),r=t[0],o=t[1],s=Object(n.useState)(""),c=Object(h.a)(s,2),p=c[0],w=c[1],b=Object(n.useState)(""),f=Object(h.a)(b,2),v=f[0],y=f[1],k=Object(n.useState)(""),T=Object(h.a)(k,2),j=T[0],x=T[1],W=Object(n.useState)({show:!1,msg:""}),C=Object(h.a)(W,2),J=C[0],O=C[1],N=Object(n.useState)({show:!1,msg:""}),S=Object(h.a)(N,2),A=S[0],I=S[1],L=Object(n.useState)({show:!1,msg:""}),P=Object(h.a)(L,2),D=P[0],q=P[1],z={color:"red"};return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,null,l.a.createElement(u.a,{className:"mt-4"},l.a.createElement(m.a,{xs:12},l.a.createElement("h2",null,"Working Demo"))),l.a.createElement(u.a,null,l.a.createElement(m.a,{xs:12,className:"mt-2"},l.a.createElement("h4",null,"Register"),l.a.createElement("p",null,"To begin with the demo, you need to register an account first. You can use fake details."),l.a.createElement(d.a,null,l.a.createElement(d.a.Group,{controlId:"registerEmail"},l.a.createElement(d.a.Label,null,"Username"),l.a.createElement(d.a.Control,{type:"text",placeholder:"Enter username",value:r,onChange:function(e){return o(e.target.value)}})),l.a.createElement(d.a.Group,{controlId:"registerPassword"},l.a.createElement(d.a.Label,null,"Password"),l.a.createElement(d.a.Control,{type:"password",placeholder:"Password",value:p,onChange:function(e){return w(e.target.value)}})),l.a.createElement(g.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault();var a={username:r,password:p};E.a.post("/api/account/register",a).then((function(e){console.log(e),O({show:!0,msg:e.data})})).catch((function(e){console.log(e),O({show:!0,msg:e.response.data})}))}},"Register"),l.a.createElement(d.a.Group,null,J.show?l.a.createElement("label",{style:z},J.msg):null)))),l.a.createElement(u.a,null,l.a.createElement(m.a,{xs:12,className:"mt-4"},l.a.createElement("h4",null,"Login"),l.a.createElement("p",null,"Enter the email and password that you registered before. The server will send you a JWT, and it will be stored in your browser's cookie. Refresh the page, and go into your browser developer tools and go into the cookie tab. In Chrome this is accessible with ctrl + shift + j, Application > Cookies and look for the cookie named jwt."),l.a.createElement(d.a,null,l.a.createElement(d.a.Group,{controlId:"loginEmail"},l.a.createElement(d.a.Label,null,"Username"),l.a.createElement(d.a.Control,{type:"text",placeholder:"Username",value:v,onChange:function(e){return y(e.target.value)}})),l.a.createElement(d.a.Group,{controlId:"loginPassword"},l.a.createElement(d.a.Label,null,"Password"),l.a.createElement(d.a.Control,{type:"password",placeholder:"Password",value:j,onChange:function(e){return x(e.target.value)}})),l.a.createElement(g.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault();var a={username:v,password:j};E.a.post("/api/account/login",a).then((function(e){var a=function(e){var a=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(t)}(e.data);I({show:!0,msg:"Login Successful, JWT expires at ".concat(a.ExpiresAt)}),document.cookie="jwt=".concat(e.data)})).catch((function(e){I({show:!0,msg:e.response.data})}))}},"Login"),l.a.createElement(d.a.Group,null,A.show?l.a.createElement("label",{style:z},A.msg):null)))),l.a.createElement(u.a,null,l.a.createElement(m.a,{xs:12,className:"mt-4 mb-4"},l.a.createElement("h4",null,"Secured Endpoint Access"),l.a.createElement("p",null,'If you\'re logged in, you will be able to make a request for this API endpoint. It should say "Hello (username)" Try logging out, and see what happens. Clicking logout button will simply mean deleting the cookie that contains the JWT.'),D.show&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,D.msg)),l.a.createElement(g.a,{variant:"success",type:"submit",onClick:function(e){e.preventDefault();var a={headers:{jwt:function(e){var a=("; "+document.cookie).split("; "+e+"=");if(2===a.length)return a.pop().split(";").shift()}("jwt"),"Access-Control-Allow-Origin":"*"}};E.a.get("/api/account/protected_page",a).then((function(e){console.log(e),q({show:!0,msg:e.data})})).catch((function(e){console.log(e.response),q({show:!0,msg:e.response.data})}))}},"Make a Request")," ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(g.a,{variant:"warning",type:"submit",onClick:function(e){e.preventDefault(),document.cookie="jwt=;expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",q({show:!0,msg:"You are logged out"})}},"Logout")))))},b=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{bg:"dark",expand:"md",variant:"dark"},l.a.createElement(s.a.Brand,{href:"/"},l.a.createElement("i",{className:"fas fa-angle-left"},"\xa0Home")),l.a.createElement(s.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(s.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(c.a,{className:"mr-auto"}))),l.a.createElement(i.a,null,l.a.createElement(u.a,{className:"mt-4"},l.a.createElement(m.a,{xs:12,className:"text-center"},l.a.createElement("h1",null,"JWT Authentication & Authorization"))),l.a.createElement(u.a,{className:"mt-4"},l.a.createElement(m.a,{xs:12},l.a.createElement("h2",null,"Overview")),l.a.createElement(m.a,{xs:12},l.a.createElement("p",null,"This project's purpose is to show the use of JSON Web Token (JWT) for authorization and authentication.")),l.a.createElement(m.a,{xs:12,className:"mt-2 mb-2"},l.a.createElement("h4",null,"Why JWT?")),l.a.createElement(m.a,{xs:12},l.a.createElement("h5",null,"1. No server-side session storage"),l.a.createElement("p",null,"With traditional sessions, we will need a mechanism to store these sessions. Sessions are usually stored in a database or in-memory storage such as redis.",l.a.createElement("br",null),l.a.createElement("br",null),"With database, the drawback is we would need to do a database query for every request. This will become a bottleneck and additional thing to maintain when the number of requests are high.",l.a.createElement("br",null),l.a.createElement("br",null),"With in-memory storage, horizontal scaling will be an issue. We would need a huge memory for it to run properly."),l.a.createElement("h5",null,"2. Sharing token with multiple backends"),l.a.createElement("p",null,"As the token is stored in client side, authenticating in the server means authenticating the JWT only. If the JWT is valid, then we can proceed with whatever secure process that the user is trying to access. In comparison, sharing sessions across multiple backends will need careful orchestration in order for these different services to be able to access the session storage."),l.a.createElement("h5",null,"3. Less network request between services"),l.a.createElement("p",null,"Since every services can theoretically authenticate the JWT, there would be less communications needed between multiple services with the session service.")),l.a.createElement(m.a,{xs:12,className:"mt-2 mb-2"},l.a.createElement("h4",null,"Disadvantages of JWT")),l.a.createElement(m.a,{xs:12},l.a.createElement("h5",null,"1. No session storage"),l.a.createElement("p",null,"This is both an advantage and disadvantage. The main disadvantage is we can't force a single user to logout. A workaround is by changing the secret key, but that would mean we would force all users to logout!"),l.a.createElement("h5",null,"2. Unable to identify logged users"),l.a.createElement("p",null,'Since the "session" is stored in client side, we have no way of figuring out which users are currently logged.'),l.a.createElement("h5",null,"3. Maximum cookie size"),l.a.createElement("p",null,"For a browser-based user, the JWT is stored as a cookie. Most browsers impose a maximum cookie size of 4kb. That means we might hit the data limit for information that could be stored in the JWT."))),l.a.createElement(u.a,null,l.a.createElement(m.a,{xs:12},l.a.createElement("p",null,"Despite all the disadvantages, JWT is a good solution for ",l.a.createElement("b",null,"API endpoints")," or ",l.a.createElement("b",null,"server-to-server")," authorization and authentication.")))),l.a.createElement(w,null))};var f=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.9d383e89.chunk.js.map